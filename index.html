<!DOCTYPE html>  <html>    <head>      <title>Premium Expense App</title>      
<meta name="viewport" content="width=device-width, initial-scale=1">      
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">      
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>      
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>  <style>      
body{      
font-family:'Poppins',sans-serif;      
background:linear-gradient(135deg,#43cea2,#185a9d);      
padding:15px;      
color:#333;      
transition:0.3s;      
}      
.dark{background:#121212;color:#eee;}      
h1{text-align:center;color:white;}      
.card{      
background:white;      
padding:20px;      
border-radius:20px;      
box-shadow:0 10px 25px rgba(0,0,0,0.2);      
margin-bottom:20px;      
}      
.dark .card{background:#1e1e1e;}      
.balanceBox{display:flex;justify-content:space-between;font-weight:600;font-size:18px;margin-top:5px;}      
#balance{font-size:22px;font-weight:bold;}      
input, select{      
width:100%;padding:12px;margin:8px 0;border-radius:12px;border:none;      
background:#f1f1f1;font-size:16px;      
}      
.dark input,.dark select{background:#2c2c2c;color:white;}      
.buttons{display:flex;justify-content:space-between;}      
button{      
width:48%;padding:12px;border:none;border-radius:15px;      
font-size:16px;font-weight:600;color:white;cursor:pointer;      
}      
.incomeBtn{background:linear-gradient(45deg,#11998e,#38ef7d);}      
.expenseBtn{background:linear-gradient(45deg,#ff416c,#ff4b2b);}      
.item{      
display:flex;justify-content:space-between;align-items:center;      
background:#f9f9f9;padding:12px;margin-top:10px;border-radius:12px;      
}      
.dark .item{background:#2a2a2a;}      
.green{color:#11998e;}      
.red{color:#ff416c;}      
.smallDate{font-size:12px;opacity:0.6;margin-top:3px;}      
.actionBtns button{      
width:24px;height:24px;margin-left:5px;      
border-radius:50%;font-size:12px;padding:0;      
}      
.deleteBtn{background:#ff4b2b;}      
.editBtn{background:#11998e;}      
.resetBtn{      
width:100%;padding:14px;margin-top:15px;border:none;border-radius:15px;      
font-size:16px;font-weight:600;color:white;      
background:linear-gradient(45deg,#ff416c,#ff4b2b);cursor:pointer;      
}      
.searchInput{margin-top:10px;}      
.lockScreen{      
position:fixed;top:0;left:0;width:100%;height:100%;      
background:#000000dd;display:flex;justify-content:center;align-items:center;      
flex-direction:column;z-index:999;      
}      
.lockBox{      
background:white;padding:30px;border-radius:20px;      
width:90%;max-width:300px;text-align:center;      
}      
.darkToggle{width:100%;margin-top:10px;background:#333;}      
canvas{margin-top:15px;}      
.pdfBtn{      
width:100%;      
margin-top:10px;      
background:#11998e;      
color:white;      
padding:12px;      
border:none;      
border-radius:12px;      
}      
</style>  </head>  <body>  <div id="lockScreen" class="lockScreen" style="display:none;">      
<div class="lockBox">      
<h3>üîê ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°</h3>      
<input type="password" id="lockPass" placeholder="‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®">      
<button onclick="checkPassword()" style="margin-top:15px;width:100%;background:#11998e;">Unlock</button>      
</div>      
</div>  <h1>üíé ‡¶∏‡ßç‡¶Æ‡¶æ‡¶∞‡ßç‡¶ü ‡¶Ü‡ßü  ‡¶¨‡ßç‡¶Ø‡ßü</h1>  <div class="card">      
<div class="balanceBox">      
<span>‡¶¨‡¶∞‡ßç‡¶§‡¶Æ‡¶æ‡¶® ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</span>      
<span id="balance">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <div class="balanceBox">      
<span style="color:#11998e;">üí∞ ‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü</span>      
<span id="totalIncome" style="color:#11998e;">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <div class="balanceBox">      
<span style="color:#ff416c;">üõí ‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</span>      
<span id="totalExpense" style="color:#ff416c;">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <button class="darkToggle" onclick="toggleDarkMode()">üåô ‡¶°‡¶æ‡¶∞‡ßç‡¶ï ‡¶Æ‡ßã‡¶°</button>  </div>  <div class="card">      
<input type="text" id="desc" placeholder="‡¶¨‡¶ø‡¶¨‡¶∞‡¶£">      
<input type="number" id="amount" placeholder="‡¶ü‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£">  <select id="category" onchange="checkOtherCategory()">      
<option value="‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞">‡¶ñ‡¶æ‡¶¨‡¶æ‡¶∞</option>      
<option value="‡¶≠‡¶æ‡ßú‡¶æ">‡¶≠‡¶æ‡ßú‡¶æ</option>      
<option value="‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ">‡¶¨‡ßç‡¶Ø‡¶¨‡¶∏‡¶æ</option>      
<option value="‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞</option>      
<option value="‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ">‡¶ö‡¶ø‡¶ï‡¶ø‡ßé‡¶∏‡¶æ</option>      
<option value="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø">‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>      
</select>  <input type="text" id="otherCategory" placeholder="‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®" style="display:none;">  <div class="buttons">      
<button class="incomeBtn" onclick="addTransaction('income')">‚ûï ‡¶Ü‡ßü</button>      
<button class="expenseBtn" onclick="addTransaction('expense')">‚ûñ ‡¶ñ‡¶∞‡¶ö</button>      
</div>      
</div>  <div class="card">      
<h3>üìã ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</h3>      
<input type="text" id="search" class="searchInput" placeholder="üîç ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡¶∞‡ßÅ‡¶®..." onkeyup="updateUI()">      
<div id="list"></div>      
<button class="resetBtn" onclick="resetAll()">üóë ‡¶∏‡¶¨ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶´‡ßá‡¶≤‡ßÅ‡¶®</button>  <hr style="margin:15px 0;">      
<h3>üìä ‡¶Ü‡ßü ‡¶¨‡¶®‡¶æ‡¶Æ ‡¶ñ‡¶∞‡¶ö ‡¶ó‡ßç‡¶∞‡¶æ‡¶´</h3>      
<canvas id="expenseChart"></canvas>  <hr style="margin:15px 0;">      
<h3>üìÖ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶∞‡¶ø‡¶™‡ßã‡¶∞‡ßç‡¶ü</h3>      
<select id="monthFilter" onchange="updateUI()" style="margin-bottom:10px;">      
<option value="all">‡¶∏‡¶¨ ‡¶Æ‡¶æ‡¶∏</option>      
</select>  <div class="balanceBox">      
<span style="color:#11998e;">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶Ü‡ßü</span>      
<span id="monthlyIncome" style="color:#11998e;">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <div class="balanceBox">      
<span style="color:#ff416c;">‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶ñ‡¶∞‡¶ö</span>      
<span id="monthlyExpense" style="color:#ff416c;">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <div class="balanceBox">      
<span>‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï ‡¶¨‡ßç‡¶Ø‡¶æ‡¶≤‡ßá‡¶®‡ßç‡¶∏</span>      
<span id="monthlyBalance">0 ‡¶ü‡¶æ‡¶ï‡¶æ</span>      
</div>  <button class="pdfBtn" onclick="downloadPDF()">üì• PDF ‡¶°‡¶æ‡¶â‡¶®‡¶≤‡ßã‡¶°</button>  </div>  <script>      
const STORAGE_KEY="my_expense_app_v2";      
const PASS_KEY="app_password";      
const SESSION_KEY="app_unlocked";    let transactions=JSON.parse(localStorage.getItem(STORAGE_KEY))||[];  
let myChart=null;  function saveData(){localStorage.setItem(STORAGE_KEY,JSON.stringify(transactions));}
function formatMoney(n){return n.toLocaleString("bn-BD");}
function getCurrentDate(){return new Date().toISOString();}

function checkOtherCategory(){
let cat=document.getElementById("category").value;
let other=document.getElementById("otherCategory");
other.style.display = (cat==="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø") ? "block" : "none";
}

function addTransaction(type){
let desc=document.getElementById("desc").value.trim();
let amount=Number(document.getElementById("amount").value);
let category=document.getElementById("category").value;

if(category==="‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø"){
category=document.getElementById("otherCategory").value.trim();
if(category===""){alert("‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®");return;}
}

if(desc===""||amount<=0){alert("‡¶§‡¶•‡ßç‡¶Ø ‡¶†‡¶ø‡¶ï‡¶≠‡¶æ‡¶¨‡ßá ‡¶¶‡¶ø‡¶®");return;}

transactions.push({type,desc,amount,category,date:getCurrentDate()});
saveData();
updateUI();
document.getElementById("desc").value="";
document.getElementById("amount").value="";
document.getElementById("otherCategory").value="";
}

async function downloadPDF(){

let selectedMonth=document.getElementById("monthFilter").value;

if(selectedMonth==="all"){
alert("‡¶®‡¶ø‡¶∞‡ßç‡¶¶‡¶ø‡¶∑‡ßç‡¶ü ‡¶Æ‡¶æ‡¶∏ ‡¶∏‡¶ø‡¶≤‡ßá‡¶ï‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®");
return;
}

let filtered=transactions.filter(t=>t.date.slice(0,7)===selectedMonth);

if(filtered.length===0){
alert("‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶ï‡ßã‡¶® ‡¶°‡¶æ‡¶ü‡¶æ ‡¶®‡ßá‡¶á");
return;
}

const { jsPDF } = window.jspdf;
let doc=new jsPDF();
let y=10;

doc.text("Monthly Report - "+selectedMonth,10,y);
y+=10;

filtered.forEach(t=>{
doc.text(
new Date(t.date).toLocaleDateString("bn-BD")+
" | "+t.type+
" | "+t.category+
" | "+t.amount+" ‡¶ü‡¶æ‡¶ï‡¶æ",
10,
y
);
y+=8;
});

// üî• ‡¶è‡¶á ‡¶Ö‡¶Ç‡¶∂‡¶ü‡¶æ‡¶á ‡¶®‡¶§‡ßÅ‡¶® (Force Download Fix)

let blob = doc.output("blob");
let url = URL.createObjectURL(blob);

let a = document.createElement("a");
a.href = url;
a.download = selectedMonth + "-report.pdf";
document.body.appendChild(a);
a.click();

document.body.removeChild(a);
URL.revokeObjectURL(url);
}
/* ‡¶¨‡¶æ‡¶ï‡¶ø ‡¶∏‡¶¨ ‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã‡¶á ‡¶Ü‡¶õ‡ßá */

function loadMonths(){
let select=document.getElementById("monthFilter");
let months=[...new Set(transactions.map(t=>t.date.slice(0,7)))];
let current=select.value;
select.innerHTML='<option value="all">‡¶∏‡¶¨ ‡¶Æ‡¶æ‡¶∏</option>';
months.forEach(m=>{
let option=document.createElement("option");
option.value=m;
option.text=m;
select.appendChild(option);
});
select.value=current;
}

function updateUI(){
let balance=0,totalIncome=0,totalExpense=0;
let monthlyIncome=0,monthlyExpense=0;

let list=document.getElementById("list");
let search=document.getElementById("search").value.toLowerCase();
let selectedMonth=document.getElementById("monthFilter").value;

list.innerHTML="";

transactions.forEach((item,index)=>{
let itemMonth=item.date.slice(0,7);
if(selectedMonth!=="all" && itemMonth!==selectedMonth) return;
if(!item.desc.toLowerCase().includes(search)) return;

let div=document.createElement("div");

if(item.type==="income"){
balance+=item.amount;
totalIncome+=item.amount;
monthlyIncome+=item.amount;
div.className="item green";
}else{
balance-=item.amount;
totalExpense+=item.amount;
monthlyExpense+=item.amount;
div.className="item red";
}

div.innerHTML=`

<div>      
${item.type==="income"?"üí∞":"üõí"} ${item.desc}      
<br><small>${item.category}</small>      
<div class="smallDate">${new Date(item.date).toLocaleDateString("bn-BD")}</div>      
</div>      
<div>      
<span>${item.type==="income"?"+":"-"} ${formatMoney(item.amount)}</span>      
<div class="actionBtns">      
<button class="editBtn" onclick="editItem(${index})">‚úè</button>      
<button class="deleteBtn" onclick="deleteItem(${index})">‚úñ</button>      
</div>      
</div>      
`;      
list.appendChild(div);      
});    document.getElementById("balance").innerText=formatMoney(balance)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  
document.getElementById("totalIncome").innerText=formatMoney(totalIncome)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  
document.getElementById("totalExpense").innerText=formatMoney(totalExpense)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  
document.getElementById("monthlyIncome").innerText=formatMoney(monthlyIncome)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  
document.getElementById("monthlyExpense").innerText=formatMoney(monthlyExpense)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  
document.getElementById("monthlyBalance").innerText=formatMoney(monthlyIncome-monthlyExpense)+" ‡¶ü‡¶æ‡¶ï‡¶æ";  updateChart(totalIncome,totalExpense);
loadMonths();
}

function updateChart(income,expense){
let ctx=document.getElementById("expenseChart").getContext("2d");
if(myChart){myChart.destroy();}
myChart=new Chart(ctx,{
type:"pie",
data:{
labels:["‡¶Æ‡ßã‡¶ü ‡¶Ü‡ßü","‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö"],
datasets:[{data:[income,expense],backgroundColor:["#11998e","#ff416c"]}]
},
options:{responsive:true}
});
}

function editItem(index){
let item=transactions[index];
document.getElementById("desc").value=item.desc;
document.getElementById("amount").value=item.amount;
document.getElementById("category").value=item.category;
transactions.splice(index,1);
saveData();
updateUI();
}

function deleteItem(index){
transactions.splice(index,1);
saveData();
updateUI();
}

function resetAll(){
if(confirm("‡¶∏‡¶¨ ‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶Æ‡ßÅ‡¶õ‡¶¨‡ßá‡¶®?")){
transactions=[];
saveData();
updateUI();
}
}

function toggleDarkMode(){document.body.classList.toggle("dark");}

function checkPassword(){
let saved=localStorage.getItem(PASS_KEY);
let input=document.getElementById("lockPass").value;
if(!saved){
localStorage.setItem(PASS_KEY,input);
alert("‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßá‡¶ü ‡¶π‡ßü‡ßá‡¶õ‡ßá");
sessionStorage.setItem(SESSION_KEY,"true");
document.getElementById("lockScreen").style.display="none";
}else{
if(input===saved){
sessionStorage.setItem(SESSION_KEY,"true");
document.getElementById("lockScreen").style.display="none";
}else{alert("‡¶≠‡ßÅ‡¶≤ ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶°");}
}
}

function initLock(){
let unlocked=sessionStorage.getItem(SESSION_KEY);
if(unlocked==="true"){
document.getElementById("lockScreen").style.display="none";
}else{
document.getElementById("lockScreen").style.display="flex";
if(!localStorage.getItem(PASS_KEY)){
alert("‡¶™‡ßç‡¶∞‡¶•‡¶Æ‡¶¨‡¶æ‡¶∞ ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‚Äî ‡¶™‡¶æ‡¶∏‡¶ì‡ßü‡¶æ‡¶∞‡ßç‡¶° ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®");
}
}
}

initLock();
updateUI();
</script>  </body>

</html>  